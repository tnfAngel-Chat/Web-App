name: 'CI -> Pipeline'

on:
    pull_request:
        branches: [stable]
        types: [opened, synchronize]

concurrency:
    group: ${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: true

permissions:
  contents: read

jobs:
    lint:
        name: 'Lint'
        runs-on: ubuntu-22.04
        permissions: write-all
        steps:
          - name: 'Checkout'
            uses: actions/checkout@a5ac7e51b41094c92402da3b24376905380afc29 # v4.1.6
            with:
              persist-credentials: false

          - name: 'Setup Bun'
            uses: oven-sh/setup-bun@f4d14e03ff726c06358e5557344e1da148b56cf7 # v1.2.2

          - name: 'Setup dependencies'
            run: bun install --frozen-lockfile

          - name: 'Run lint'
            run: bun run lint